<!-- app/views/books/index.html.erb -->
<h1>Books</h1>

<%= form_tag(books_path, method: :get) do %>
  <%= select_tag :author_id, options_for_select(Author.all.map { |a| [a.name, a.id] }, params[:author_id]), prompt: "著者を選択" %>
  <%= text_field_tag :query, params[:query], placeholder: "キーワードを入力" %>
  <%= submit_tag "検索" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>作者</th>
      <th>題名</th>
      <th>概要</th>
    </tr>
  </thead>
  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= Author.find(book.author_id).name %></td>
        <td><%= book.author %></td>
        <td><%= book.description %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'New Book', new_book_path %>
<%= link_to 'トップに戻る', posts_path %>

